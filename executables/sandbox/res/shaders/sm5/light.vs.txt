in vec4 a_position;

uniform mat4 model_to_clip;

out vec3 v_view_vector;

void main()
{
   gl_Position = global.clip_from_model * vec4(a_position.xyz, 1.0);

   vec4 position = global.world_from_model * vec4(a_position.xyz, 1.0);

   vec3 view_position_in_world = vec3(
      global.world_from_view[3][0],
      global.world_from_view[3][1],
      global.world_from_view[3][2]
   );

   v_view_vector = view_position_in_world.xyz - position.xyz;

}

